<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- <head data-th-fragment="cabecalho(title, links)"> -->
<!-- <head th:replace="fragmentos/fragmentos_layout :: cabecalho(~{::title},~{::link})"> -->

<head th:replace="fragmentos/fragmentos-layout :: cabecalho">
</head>

<body>

  <span data-th-replace="fragmentos/fragmentos-scripts :: script-tinymce" ></span>
	<header data-th-replace="fragmentos/fragmentos-layout :: barra-navegacao"></header>

	<!-- conteúdo principal -->
	<main class="container">

	<section class="row">
	
		<div data-th-replace="fragmentos/fragmentos-mensagens :: mensagem-sucesso" ></div>
		
		<div class="panel panel-default">

		<div class="panel-heading">
			<div class="clearfix">
				<h1 class="panel-title" style="float: left">Cadastro de Livros</h1>
				<a data-th-href="@{/livro/pesquisa}" class="btn btn-link" style="float: right">Pesquisar Livro</a>
			</div>
		</div>

		<div class="panel-body">
		   
		  <!-- formulário de cadastro de livro --> 
		  <form class="form-horizontal" data-th-action="@{/livro/salva}" method="post" 
		        data-th-object="${livro}" enctype="multipart/form-data" >
 
			<div data-th-replace="fragmentos/fragmentos-mensagens :: mensagem-erro-form" />
					
			<fieldset>
				<legend class="center-block">
					<h2>Cadastro de Livros</h2>
					<span style="font-size: small">* Campo requerido</span>
				</legend>

				<!-- Campo Id é necessário para diferenciar quando é um novo livro 
				     ou a edição de um já existente -->
				
				<input type="hidden" name="id" data-th-value="${livro.id}" />

				<div class="form-group">
					<div class="col-md-2"></div>
					<div class="col-md-8">
						<button type="submit" class="btn btn-success">Salvar</button>
						<a class="btn btn-danger" data-th-href="@{/}">Cancela</a>
					</div>
				</div>

						<!-- Título -->
				<div class="form-group" data-th-classappend="${#fields.hasErrors('titulo')} ? 'has-error has-feedback' ">
					<label class="col-md-2 control-label" for="titulo">* Título</label>

					<div class="col-md-8">
						<input type="text" name="titulo" class="form-control" id="titulo"
							data-th-value="${livro.titulo}"
							placeholder="Título do Livro" /> 
					</div>
					</div>
				

				<!-- Autor -->
				<div class="form-group">
				<label class="col-md-2 control-label" for="autor">* autor</label>
					<div class="col-md-8">
						<input type="text" name="autor" class="form-control" id="autor"
							data-th-value="${livro.autor}" placeholder="autor(es) do livro" />
					</div>
        </div>
				<!-- Editora -->
					<div class="form-group">

						<label class="col-md-2 control-label" for="editora">Editora</label>
						<div class="col-md-8">
						
							<select name="editoraId" class="form-control">
								<option data-th-each="editora : ${editoras}"
								      	data-th-value="${editora.id}" 
								      	data-th-text="${editora.nome}"  >
								      	
								</option>
								<!-- data-th-if="${editora.id} != null && ${editora.id} == ${livro.editora.id}" 
								      	                       th:attr="selected='selected'"  -->
							</select>
							
						</div>
					</div>
						
						<!-- Data de Publicação -->
						<div class="form-group">

							<label class="col-md-2 control-label" for="dataPublicacao">Data de Publicação</label>
							<div class="col-md-8 container-datepicker-js">
								<input type="text" class="form-control" id="dataPublicacao"
									data-th-value="${{livro.dataPublicacao}}" name="dataPublicacao"
									placeholder="Data em que o livro foi publicado" />
							</div>
						</div>

						<!-- Idioma -->
				  <div class="form-group">
				 	 <label class="col-md-2 control-label" for="idioma">Idioma</label>
					 <div class="col-md-8">
						<select data-th-value="${livro.idioma}" id="idioma" name="idioma"
							class="form-control">
							<option value="english">Português</option>
							<option value="spanish">Inglês</option>
							<option value="spanish">Espanhol</option>
						</select>
					</div>
				</div>

				<!-- Categoria -->
						<div class="form-group">
							<div
								data-th-classappend="${#fields.hasErrors('categoria')} ? 'has-error has-feedback' ">

								<label class="col-md-2 control-label" for="categoria">*
									Categoria</label>
								<div class="col-md-8">
									<select data-th-value="${livro.categoria}" id="categoria"
										name="categoria" class="form-control">
										<option value="" selected="selected" disabled="disabled">
											Selecione uma opção...</option>
										<option value="Gestão"
											data-th-selected="(${livro.categoria}=='Gestão')">Gestão</option>
										<option value="Engenharia"
											data-th-selected="(${livro.categoria}=='Engenharia')">Engenharia</option>
										<option value="Programação"
											data-th-selected="(${livro.categoria}=='Programação')">Programação</option>
										<option value="Redes de Computadores"
											data-th-selected="(${livro.categoria}=='Redes de Computadores')">Redes
											de Computadores</option>
									</select>
								</div>
							</div>
						</div>

						<!-- Quantidade de Páginas -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="paginas">Paginas</label>
					<div class="col-md-8">
						<input type="number" name="paginas" class="form-control"
							id="paginas" data-th-value="${livro.paginas}"
							placeholder="Quantidade de páginas do livro" /> 
					</div>
				</div>

				<!-- ISBN -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="isbn">ISBN</label>

					<div class="col-md-8">
						<input type="text" name="isbn" class="form-control" id="isbn"
							data-th-value="${livro.isbn}" placeholder="ISBN do livro" /> 
					</div>
				</div>

				<!-- Peso do livro -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="peso">Peso</label>
					<div class="col-md-8">
						<div class="input-group">
							<input data-th-value="${livro.peso}" type="number" name="peso"
								class="form-control" id="peso" placeholder="Peso do livro em gramas" /> 
								<span class="input-group-addon">gramas</span>
						</div>
					</div>
				</div>

				<!-- Preço de tabela -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="precoTabelado">Preço
						de tabela</label>
					<div class="col-md-8">
						<div class="input-group">
							<span class="input-group-addon">R$</span> 
							<input data-th-value="${livro.precoTabelado}" type="text"
								name="precoTabelado" class="form-control maskmoney-js" id="precoTabelado"
								placeholder="Preco padrão (tabelado)" />
						</div>
					</div>
				</div>

				<!-- Preço Atual -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="precoAtual">Preço Atual</label>
					<div class="col-md-8">
						<div class="input-group">
							<span class="input-group-addon">R$</span> 
							<input data-th-value="${livro.precoAtual}" type="text" name="precoAtual"
								class="form-control maskmoney-js" id="precoAtual" 
								placeholder="Preço atual do livro" />
						</div>
					</div>
				</div>

				<!-- Quantidade de livro em estoque -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="quantidaEmEstoque">Quantidade
						em Estoque</label>
					<div class="col-md-8">
						<input data-th-value="${livro.quantidaEmEstoque}" type="number"
							name="quantidaEmEstoque" class="form-control"
							id="quantidaEmEstoque"
							placeholder="Números de exemplares em estoque" /> 
					</div>
				</div>

				<!-- status do livro -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="status">Status</label>
					<div class="col-md-8">
						<label> <input value="true" type="radio" name="ativo"
							checked="checked" /> Ativo
						</label> <label> <input value="false" type="radio" name="ativo" />
							Inativo
						</label> 
						<span class="help-block"> Define se o livro está
							disponível para ser comercializado. </span>
					</div>
				</div>

				<!-- descrição -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="descricao">Descrição</label>
					<div class="col-md-8">
						<textarea name="descricao" rows="5" class="form-control"
							id="descricao" data-th-utext="${livro.descricao}" 
							data-th-value="${livro.descricao}"></textarea>
					</div>
				</div>

				<!-- upload da imagem (foto) do livro -->
				<div class="form-group">
					<label class="col-md-2 control-label" for="foto">Foto do Livro</label>
					<div class="col-md-8">
						<input type="file" name="imagemDoLivro" id="foto" class="form-control" 
							title="Selecione a Imagem (foto) da capa do livro" />
					</div>
				</div>


				<div class="form-group">
					<div class="col-md-2"></div>
					<div class="col-md-8">
						<button type="submit" class="btn btn-success">Salvar</button>
						<a class="btn btn-danger" data-th-href="@{/}">Cancela</a>
					</div>
				</div>
			</fieldset>
		</form>
		</div>  <!-- panel-body -->
   </div> <!-- panel -->
	</section> <!-- row --> 
	</main>

	<span data-th-replace="fragmentos/fragmentos-scripts :: bootstrap"></span>
	<span data-th-replace="fragmentos/fragmentos-scripts :: datepicker"></span>
	<span data-th-replace="fragmentos/fragmentos-scripts :: maskmoney"></span>
	<span data-th-replace="fragmentos/fragmentos-scripts :: mybookstore-js"></span>
	
</body>
</html>
